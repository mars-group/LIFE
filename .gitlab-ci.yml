stages:
  - test
  - build
  - deploy

variables:
  PUSH_PATH: "https://nexus.informatik.haw-hamburg.de/repository/nuget-group/"
    #"https://artifactory.mars.haw-hamburg.de/artifactory/api/nuget/nuget-local/"
  MAJOR_LIFE_VERSION: "2.1.2"

cache:
  untracked: true
  paths:
    - /root/.nuget/packages/

# Meta Packages
testAll:
 tags:
    - k8s
 stage: test
 image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
 services:
   - nexus.informatik.haw-hamburg.de/influxdb:1.2
 script:
    - dotnet msbuild "/t:Restore" /p:VersionSuffix=unstable-$CI_PIPELINE_ID /p:Configuration=Release
    - cd Tests/BasicAgentsTests
    - dotnet test
    - cd ../EnvironmentServiceComponentTests
    - dotnet test
    - cd ../GridEnvironmentTest
    - dotnet test
    - cd ../GeoGridEnvironmentTests
    - dotnet test
    - cd ../GeoPotentialFieldLayerTests
    - dotnet test
    - cd ../GridPotentialFieldLayerTests
    - dotnet test
    - cd ../ModelContainerTests
    - dotnet test
    - cd ../MulticastAdapterTests
    - dotnet test
    #- cd ../NodeRegistryTests
    #- dotnet test
    - cd ../SimulationPlanParserTests
    - dotnet test
    - cd ../TimeSeriesLayerTests
    - dotnet test

##### for future reference ######
# the dotnet pack --output option is named /p:PackageOutputPath= in msbuild #

build-LIFE-API:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - cd LIFE-API
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LIFE-API
  artifacts:
    expire_in: 120 mins
    paths:
      - out-LIFE-API/


build-LIFE-Core:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/LIFECoreStarter
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LIFE-Core
  artifacts:
    expire_in: 120 mins
    paths:
      - out-LIFE-Core/

build-LIFE-Components:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/LIFE-Components
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LIFE-Components
  artifacts:
    expire_in: 120 mins
    paths:
      - out-LIFE-Components/

# LIFE Components Sub Packages

build-BasicAgents:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Agents/BasicAgents
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-BasicAgents
  artifacts:
    expire_in: 120 mins
    paths:
      - out-BasicAgents/

build-ESC:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Environments/EnvironmentServiceComponent
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-ESC
  artifacts:
    expire_in: 120 mins
    paths:
      - out-ESC/

build-GeoGridEnvironment:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Environments/GeoGridEnvironment
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-GeoGridEnvironment
  artifacts:
    expire_in: 120 mins
    paths:
      - out-GeoGridEnvironment

build-GridEnvironment:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Environments/GridEnvironment
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-GridEnvironment
  artifacts:
    expire_in: 120 mins
    paths:
      - out-GridEnvironment

build-GeoPotentialField:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Layers/GeoPotentialFieldLayer
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-GeoPotentialFieldLayer
  artifacts:
    expire_in: 120 mins
    paths:
      - out-GeoPotentialFieldLayer

build-GridPotentialField:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Layers/GridPotentialFieldLayer
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-GridPotentialFieldLayer
  artifacts:
    expire_in: 120 mins
    paths:
      - out-GridPotentialFieldLayer

build-ObstacleLayer:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Layers/ObstacleLayer
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-ObstacleLayer
  artifacts:
    expire_in: 120 mins
    paths:
      - out-ObstacleLayer

build-RawFileLayer:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Layers/RawFileLayer
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-RawFileLayer
  artifacts:
    expire_in: 120 mins
    paths:
      - out-RawFileLayer

build-TimeSeriesLayer:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Layers/TimeSeriesLayer
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-TimeSeriesLayer
  artifacts:
    expire_in: 120 mins
    paths:
      - out-TimeSeriesLayer

build-Utilities:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Utilities
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-Utilities
  artifacts:
    expire_in: 120 mins
    paths:
      - out-Utilities

build-AgentManagerService:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Services/AgentManagerService
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-AgentManager
  artifacts:
    expire_in: 300 mins
    paths:
      - out-AgentManager/

build-AgentShadowingService:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Components/Services/AgentShadowingService
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-AgentShadowingService
  artifacts:
    expire_in: 300 mins
    paths:
      - out-AgentShadowingService/

# LIFE Core Sub Packages

build-ASC:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/T-Components/ASC
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-ASC
  artifacts:
    expire_in: 120 mins
    paths:
      - out-ASC


build-Scs:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/T-Components/Scs
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-Scs
  artifacts:
    expire_in: 120 mins
    paths:
      - out-Scs

build-MulticastAdapter:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/T-Components/MulticastAdapter
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-MulticastAdapter
  artifacts:
    expire_in: 120 mins
    paths:
      - out-MulticastAdapter

build-CustomUtilities:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/T-Components/CustomUtilities
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-CustomUtilities
  artifacts:
    expire_in: 120 mins
    paths:
      - out-CustomUtilities

build-ConfigurationAdapter:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/Common/ConfigurationAdapter
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-ConfigurationAdapter
  artifacts:
    expire_in: 120 mins
    paths:
      - out-ConfigurationAdapter

build-CommonTypes:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/Common/CommonTypes
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-CommonTypes
  artifacts:
    expire_in: 300 mins
    paths:
      - out-CommonTypes/

build-LayerContainerFacade:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/LayerContainer/LayerContainerFacade
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LayerContainerFacade
  artifacts:
    expire_in: 300 mins
    paths:
      - out-LayerContainerFacade/


build-LayerContainerShared:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/LayerContainer/LayerContainerShared
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LayerContainerShared
  artifacts:
    expire_in: 300 mins
    paths:
      - out-LayerContainerShared/

build-LayerFactory:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/LayerContainer/LayerFactory
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LayerFactory
  artifacts:
    expire_in: 300 mins
    paths:
      - out-LayerFactory/

build-LayerLoader:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/Common/LayerLoader
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LayerLoader
  artifacts:
    expire_in: 300 mins
    paths:
      - out-LayerLoader/

build-LayerNameService:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/SimulationManager/LayerNameService
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LayerNameService
  artifacts:
    expire_in: 300 mins
    paths:
      - out-LayerNameService/

build-LayerRegistry:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/LayerContainer/LayerRegistry
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LayerRegistry
  artifacts:
    expire_in: 300 mins
    paths:
      - out-LayerRegistry/

build-LNSConnector:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/Common/LNSConnector
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LNSConnector
  artifacts:
    expire_in: 300 mins
    paths:
      - out-LNSConnector/

build-ModelContainer:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/SimulationManager/ModelContainer
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-ModelContainer
  artifacts:
    expire_in: 300 mins
    paths:
      - out-ModelContainer/

build-NodeRegistry:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/Common/NodeRegistry
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-NodeRegistry
  artifacts:
    expire_in: 300 mins
    paths:
      - out-NodeRegistry/

build-PartitionManager:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/LayerContainer/PartitionManager
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-PartitionManager
  artifacts:
    expire_in: 300 mins
    paths:
      - out-PartitionManager/

build-ResultAdapter:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/LayerContainer/ResultAdapter
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-ResultAdapter
  artifacts:
    expire_in: 300 mins
    paths:
      - out-ResultAdapter/

build-RTEManager:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/LayerContainer/RTEManager
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-RTEManager
  artifacts:
    expire_in: 300 mins
    paths:
      - out-RTEManager/

build-RuntimeEnvironment:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/SimulationManager/RuntimeEnvironment
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-RuntimeEnvironment
  artifacts:
    expire_in: 300 mins
    paths:
      - out-RuntimeEnvironment/

build-SimulationManagerFacade:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/SimulationManager/SimulationManagerFacade
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-SimulationManagerFacade
  artifacts:
    expire_in: 300 mins
    paths:
      - out-SimulationManagerFacade/

build-SimulationManagerShared:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/SimulationManager/SimulationManagerShared
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-SimulationManagerShared
  artifacts:
    expire_in: 300 mins
    paths:
      - out-SimulationManagerShared/

build-SMConnector:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/Common/SMConnector
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-SMConnector
  artifacts:
    expire_in: 300 mins
    paths:
      - out-SMConnector/

build-LCConnector:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/Common/LCConnector
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LCConnector
  artifacts:
    expire_in: 300 mins
    paths:
      - out-LCConnector/

build-LIFECoreUtilities:
  stage: build
  tags:
    - k8s
  image: nexus.informatik.haw-hamburg.de/microsoft/dotnet:1.1.2-sdk
  script:
    - dotnet msbuild "/t:Restore"  /p:Configuration=Release
    - cd LIFE-Core/T-Components/LIFECoreUtilities
    - dotnet pack -c Release --output $CI_PROJECT_DIR/out-LIFECoreUtilities
  artifacts:
    expire_in: 120 mins
    paths:
      - out-LIFECoreUtilities/

pushAllPackages:
  stage: deploy
  tags:
    - k8s
  image: frolvlad/alpine-mono
  only:
    - master
  script:
    - mono .nuget/NuGet.exe push out-LIFE-API/LIFE-API.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LIFE-Core/LIFE-Core.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LIFE-Components/LIFE-Components.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-BasicAgents/BasicAgents.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-GeoGridEnvironment/GeoGridEnvironment.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-GridEnvironment/GridEnvironment.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-ESC/EnvironmentServiceComponent.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-GeoPotentialFieldLayer/GeoPotentialFieldLayer.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-GridPotentialFieldLayer/GridPotentialFieldLayer.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-ObstacleLayer/ObstacleLayer.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-RawFileLayer/RawFileLayer.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-TimeSeriesLayer/TimeSeriesLayer.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-Utilities/Utilities.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-ASC/ASC.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-Scs/Scs.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-MulticastAdapter/MulticastAdapter.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-CustomUtilities/CustomUtilities.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-ConfigurationAdapter/ConfigurationAdapter.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-AgentManager/AgentManagerService.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-AgentShadowingService/AgentShadowingService.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-CommonTypes/CommonTypes.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LayerContainerFacade/LayerContainerFacade.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LayerContainerShared/LayerContainerShared.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LayerFactory/LayerFactory.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LayerLoader/LayerLoader.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LayerNameService/LayerNameService.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LayerRegistry/LayerRegistry.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LNSConnector/LNSConnector.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-ModelContainer/ModelContainer.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-NodeRegistry/NodeRegistry.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-PartitionManager/PartitionManager.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-ResultAdapter/ResultAdapter.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-RTEManager/RTEManager.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-RuntimeEnvironment/RuntimeEnvironment.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-SimulationManagerFacade/SimulationManagerFacade.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-SimulationManagerShared/SimulationManagerShared.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-SMConnector/SMConnector.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LCConnector/LCConnector.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
    - mono .nuget/NuGet.exe push out-LIFECoreUtilities/LIFECoreUtilities.$MAJOR_LIFE_VERSION.nupkg -ApiKey $PUSH_KEY -Source $PUSH_PATH
